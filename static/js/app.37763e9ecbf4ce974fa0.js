webpackJsonp([1],{"+8dS":function(e,t){},"/Tkr":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("j1ja");var i=n("7+uW"),s=n("/ocq"),o=n("Gu7T"),a=n.n(o),r=n("d7EF"),c=n.n(r),h=n("woOf"),u=n.n(h),d=n("Dd8w"),f=n.n(d),p=n("NYxO"),l=n("pFYg"),k=n.n(l),m={types:{isArray:function(e){return Array.isArray(e)||Object.prototype.isPrototypeOf.call(NodeList.prototype,e)},isBoolean:function(e){return!0===e||!1===e},isElement:function(e){return e instanceof Element},isFunction:function(e){return"function"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:function(e){return"object"===(void 0===e?"undefined":k()(e))&&null!==e},isString:function(e){return"string"==typeof e}},randomizer:function(e,t){return e+Math.round(Math.random()*(t-e))},getRandomSingleCoord:function(e,t){return this.randomizer(e,t)},getRandomDoubleCoord:function(e,t,n,i){return{x:this.getRandomSingleCoord(e,t),y:this.getRandomSingleCoord(n,i)}}},g={props:{options:{type:Object,required:!0,default:{}}}},S={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"env-obj",style:{width:this.options.width,height:this.options.height,top:this.options.top,left:this.options.left,transition:"left "+this.speed+"ms linear, top "+this.speed+" linear"}})},staticRenderFns:[]};var b=n("VU/8")(g,S,!1,function(e){n("i6iW")},"data-v-2e307669",null).exports,v={props:{options:{type:Object,required:!0,default:{}}}},y={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"food",style:{width:this.options.width,height:this.options.height,top:this.options.top,left:this.options.left,transition:"left "+this.speed+"ms linear, top "+this.speed+" linear"}})},staticRenderFns:[]};var O=n("VU/8")(v,y,!1,function(e){n("+8dS")},"data-v-6f6651f2",null).exports,x={props:{options:{type:Object,required:!0,default:{}},speed:{type:Number,required:!0},index:{type:Number,required:!0,default:0},len:{type:Number,required:!0,default:0}},methods:{getTransition:function(){return"left "+this.speed+"ms linear, top "+this.speed+"ms linear, transform 200ms linear"},isHead:function(){return 0===this.index},isLastBlock:function(){return this.index===this.len-1},isBeforeLastBlock:function(){return this.index===this.len-2},getTransform:function(){return this.isHead()?"scale(1)":this.isLastBlock()?"scale(0.8)":this.isBeforeLastBlock()?"scale(0.85)":"scale(0.9)"}}},j={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{class:["snake",{head:this.isHead}],style:{width:this.options.width,height:this.options.height,top:this.options.top,left:this.options.left,transform:this.getTransform(),transition:this.getTransition()}})},staticRenderFns:[]};var w={name:"GamePage",components:{EnvObj:b,FoodObj:O,SnakeBodyObj:n("VU/8")(x,j,!1,function(e){n("/Tkr")},"data-v-979219e6",null).exports},computed:f()({},Object(p.b)(["allDirections","baseZone","blockSize","currentDirection","envObjects","foodObjects","currentSpeed","defaultSpeed","isSnakeMoving","sceneGrid","sceneParams","snakeBlocks","snakeHead","snakeCurrentLength","snakeDefaultLength","snakeParams","canMove","canSwitchDirection"])),methods:{getBlockOffset:function(e){var t=this.sceneGrid,n=t.width;return{top:"calc("+100/t.height*(e.y-1)+"%)",left:"calc("+100/n*(e.x-1)+"%)"}},getBlockParams:function(e){var t=this.blockSize,n=t.width,i=t.height,s=this.getBlockOffset(e);return{width:n,height:i,top:s.top,left:s.left}},checkIfCoordsExist:function(e,t){return t.some(function(t){return t.x===e.x&&t.y===e.y})},checkIfSnakeHeadExist:function(){return this.snakeBlocks.length>0},createBlockCoords:function(e){var t=e.isBaseZoneException,n=e.isSnakeException,i=e.isEnviromentException,s=e.isFoodException,o=e.repository,a=this.sceneGrid,r=a.width,c=a.height,h=m.getRandomDoubleCoord(1,r,1,c),u=t&&this.checkIfCoordsExist(h,this.baseZone),d=n&&this.checkIfCoordsExist(h,this.snakeBlocks),f=i&&this.checkIfCoordsExist(h,this.envObjects),p=s&&this.checkIfCoordsExist(h,this.foodObjects);u||d||f||p?this.createBlockCoords(e):o.push(h)},fillBaseZone:function(){this.$store.dispatch("changeBaseZoneObjects",[]);for(var e=[],t=this.sceneParams.baseZoneLeftStart;t<=this.sceneParams.baseZoneLeftOffset;t++)for(var n=this.sceneParams.baseZoneTopStart;n<=this.sceneParams.baseZoneTopOffset;n++)e.push({x:t,y:n});this.$store.dispatch("changeBaseZoneObjects",e)},refreshEnviroment:function(){this.$store.dispatch("changeEnvObjects",[]);for(var e=this.sceneParams.envObjectsQuantity,t=[],n={isBaseZoneException:!0,isSnakeException:!1,isEnviromentException:!0,isFoodException:!1,repository:t},i=1;i<=e;i++)this.createBlockCoords(n);this.$store.dispatch("changeEnvObjects",t)},refreshFood:function(){var e=this,t=[],n={isBaseZoneException:!1,isSnakeException:!0,isEnviromentException:!0,isFoodException:!1,repository:t};this.createBlockCoords(n),setTimeout(function(){e.$store.dispatch("changeFoodObjects",t)},0)},refreshSnake:function(){this.$store.dispatch("changeSnakeObjects",[]);for(var e=[],t=Math.floor(this.sceneParams.baseZoneTopStart+this.sceneParams.baseZoneTopOffset/2),n=this.sceneParams.baseZoneLeftStart,i=n+this.snakeParams.defaultLength-1;i>=n;i--)e.push({x:i,y:t});this.$store.dispatch("changeSnakeObjects",e)},clearGameParams:function(){this.$store.dispatch("changeSpeedToDefault")},isNextSnakeStep:function(e){var t=this.sceneParams,n=t.width,i=t.height,s=this.checkIfCoordsExist(e,this.snakeBlocks),o=this.checkIfCoordsExist(e,this.envObjects),a=!(e.x<=n&&e.x>0&&e.y<=i&&e.y>0);return!s&&!o&&!a},getHeadNextStepCoords:function(e,t){var n=u()({},e),i=n.x,s=n.y;return"up"===t&&(s-=1),"down"===t&&(s+=1),"left"===t&&(i-=1),"right"===t&&(i+=1),{x:i,y:s}},changeDirection:function(e){var t=this.currentDirection;e===t||"left"===e&&"right"===t||"right"===e&&"left"===t||"up"===e&&"down"===t||"down"===e&&"up"===t||this.$store.dispatch("changeSnakeDirection",e)},getDirectionByButton:function(e){if(this.canMove&&this.canSwitchDirection){var t=e.keyCode;t>=37&&t<=40&&(this.changeDirection({37:"left",38:"up",39:"right",40:"down"}[t]),this.$store.dispatch("changeDirectionSwitchAbility",!1)),!this.isSnakeMoving&&this.canMove&&(this.$store.dispatch("changeSnakeMovementStatus",!0),this.drawSnakeNextStep())}},increaseSpeed:function(){var e=this.currentSpeed,t=e-.04*e;this.$store.dispatch("changeCurrentSpeed",t)},drawSnakeNextStep:function(){var e=this;if(e.isSnakeMoving&&e.canMove&&e.checkIfSnakeHeadExist()){var t=c()(this.snakeBlocks,1)[0],n=this.getHeadNextStepCoords(t,e.currentDirection);if(!e.isNextSnakeStep(n))return e.$store.dispatch("changeSnakeMovementStatus",!1),void e.$store.dispatch("changeMovingAbility",!1);var i=this.checkIfCoordsExist(n,e.foodObjects),s=[].concat(a()(e.snakeBlocks)),o=s.reduce(function(e,t,i){if(0===i&&e.push({x:n.x,y:n.y}),s[i-1]){var o=s[i-1];e.push({x:o.x,y:o.y})}return e},[]),r=i?s[s.length-1]:null;this.$store.dispatch("updateSnakeObjects",o),r&&(this.$store.dispatch("addSnakeBlock",{x:r.x,y:r.y}),e.increaseSpeed(),e.refreshFood()),e.canSwitchDirection||this.$store.dispatch("changeDirectionSwitchAbility",!0),setTimeout(function(){e.drawSnakeNextStep()},e.currentSpeed)}},drawGame:function(){this.fillBaseZone(),this.refreshEnviroment(),this.refreshSnake(),this.refreshFood()},resetGame:function(){this.$store.dispatch("changeSnakeMovementStatus",!1),this.$store.dispatch("changeMovingAbility",!0),this.$store.dispatch("changeSpeedToDefault"),this.$store.dispatch("changeDirectionSwitchAbility",!0)},addControls:function(){document.addEventListener("keydown",this.getDirectionByButton)},restart:function(){this.resetGame(),this.drawGame()}},mounted:function(){this.drawGame(),this.addControls()}},B={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app_container"},[n("div",{staticClass:"tool_panel"},[n("div",{staticClass:"restart-button",on:{click:e.restart}},[n("span",[e._v("Restart Game")])])]),e._v(" "),n("div",{staticClass:"app"},[n("div",{staticClass:"app_scene"},[e._l(e.envObjects,function(t){return n("EnvObj",{key:t,attrs:{options:e.getBlockParams(t)}})}),e._v(" "),e._l(e.foodObjects,function(t){return n("FoodObj",{key:t,attrs:{options:e.getBlockParams(t)}})}),e._v(" "),e._l(e.snakeBlocks,function(t,i){return n("SnakeBodyObj",{key:t,attrs:{options:e.getBlockParams(t),speed:e.currentSpeed,index:i,len:e.snakeBlocks.length}})})],2)])])},staticRenderFns:[]};var E=n("VU/8")(w,B,!1,function(e){n("Wkwd")},"data-v-eb051094",null).exports;i.a.use(s.a);var C=new s.a({routes:[{path:"/",name:"GamePage",component:E}]}),D={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"snake-app"}},[t("router-view")],1)},staticRenderFns:[]};var M=n("VU/8")({name:"Snake"},D,!1,function(e){n("YsIg")},null,null).exports,P={changeBaseZoneObjects:function(e,t){(0,e.commit)("setBaseZoneObjects",t)},changeEnvObjects:function(e,t){(0,e.commit)("setEnvObjects",t)},changeFoodObjects:function(e,t){(0,e.commit)("setFoodObjects",t)},changeSnakeObjects:function(e,t){(0,e.commit)("setSnakeObjects",t)},updateSnakeObjects:function(e,t){(0,e.commit)("updateSnakeObjects",t)},changeSpeedToDefault:function(e){(0,e.commit)("setDefaultSpeed")},changeCurrentSpeed:function(e,t){(0,e.commit)("setCurrentSpeed",t)},changeSnakeMovementStatus:function(e,t){(0,e.commit)("setSnakeMoving",t)},addSnakeBlock:function(e,t){(0,e.commit)("addSnakeBlock",t)},changeSnakeDirection:function(e,t){(0,e.commit)("setSnakeDirection",t)},changeMovingAbility:function(e,t){(0,e.commit)("setMovingAbility",t)},changeDirectionSwitchAbility:function(e,t){(0,e.commit)("setDirectionSwitchAbility",t)}},Z={allDirections:function(e){return e.snake.params.directions},baseZone:function(e){return e.snake.baseZone},blockSize:function(e){var t=e.scene.params;return{width:"calc("+100/t.width+"%)",height:"calc("+100/t.height+"%)"}},currentDirection:function(e){return e.snake.params.currentDirection},envObjects:function(e){return e.scene.enviromentObjects},foodObjects:function(e){return e.scene.foodObjects},currentSpeed:function(e){return e.gameParams.currentSpeed},defaultSpeed:function(e){return e.gameParams.defaultSpeed},sceneGrid:function(e){var t=e.scene.params;return{width:t.width,height:t.height}},sceneParams:function(e){return e.scene.params},snakeBlocks:function(e){return e.snake.bodyCoords},snakeHead:function(e){return e.snake.headCoords},snakeCurrentLength:function(e){return e.snake.params.currentLength},snakeDefaultLength:function(e){return e.snake.params.defaultLength},snakeParams:function(e){return e.snake.params},isSnakeMoving:function(e){return e.snake.isMoving},gameParams:function(e){return e.gameParams},canMove:function(e){return e.snake.canMove},canSwitchDirection:function(e){return e.snake.canSwitchDirection}},$={setBaseZoneObjects:function(e,t){e.snake.baseZone=t},setEnvObjects:function(e,t){e.scene.enviromentObjects=t},setFoodObjects:function(e,t){e.scene.foodObjects=t},setSnakeObjects:function(e,t){e.snake.bodyCoords=t},updateSnakeObjects:function(e,t){e.snake.bodyCoords.forEach(function(e,n){e.x=t[n].x,e.y=t[n].y})},setDefaultSpeed:function(e){e.gameParams.currentSpeed=e.gameParams.defaultSpeed},setSnakeMoving:function(e,t){e.snake.isMoving=t},addSnakeBlock:function(e,t){var n=e.snake.bodyCoords;n.push(t),e.snake.bodyCoords=n},setSnakeDirection:function(e,t){e.snake.params.currentDirection=t},setMovingAbility:function(e,t){e.snake.canMove=t},setCurrentSpeed:function(e,t){e.gameParams.currentSpeed=t},setDirectionSwitchAbility:function(e,t){e.snake.canSwitchDirection=t}};var _,F={directions:["right","down","left","up"],isIe:(_=window.navigator.userAgent,-1!==_.indexOf("MSIE ")||-1!==_.indexOf("Trident/")),isMobile:/Android|webOS|iPad|iPhone|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)};i.a.use(p.a);var L=new p.a.Store({state:{scene:{params:{width:20,height:20,envObjectsQuantity:13,baseZoneLeftStart:1,baseZoneTopStart:1,baseZoneLeftOffset:10,baseZoneTopOffset:5},enviromentObjects:[],foodObjects:[]},snake:{params:{currentDirection:"null",currentLength:5,defaultLength:5,directions:F.directions},isMoving:!1,canMove:!0,canSwitchDirection:!0,baseZone:[],bodyCoords:[],headCoords:{}},gameParams:{currentSpeed:200,defaultSpeed:200},client:{isIe:F.isIe,isMobile:F.isMobile}},actions:P,getters:Z,mutations:$});i.a.config.productionTip=!1,new i.a({components:{Snake:M},el:"#snake",router:C,store:L,template:"<Snake />"})},Wkwd:function(e,t){},YsIg:function(e,t){},i6iW:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.37763e9ecbf4ce974fa0.js.map